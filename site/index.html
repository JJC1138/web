<!DOCTYPE html>
<html>
<head>
<title>Jon Colverson / JJC1138</title>
<link href="https://www.google.com/accounts/o8/ud" rel="openid2.provider">
<link href="http://www.google.com/profiles/jjc1138" rel="openid2.local_id">

<meta name="viewport" content="width=device-width, user-scalable=no">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/yui/3.18.0/cssreset/cssreset-min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/yui/3.18.0/cssfonts/cssfonts-min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/yui/3.18.0/cssbase/cssbase-min.css">

<script src="https://use.typekit.net/kqf5olx.js"></script>
<script>/* global Typekit */try{Typekit.load({ async: true });}catch(e){}</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script>
/* jshint eqeqeq: true, futurehostile: true, noarg: true, nocomma: true, strict: true, undef: true, unused: true */
/* global $, document, window */
$(document).ready(function() {
    'use strict';
    (function() {
        // This is based on:
        // http://pipwerks.com/2009/02/01/obfuscating-email-addresses-revisited/
        // by Philip Hutchison
        var events = 'click contextmenu focus mouseover';
        function addressCleaner() {
            /* jshint validthis: true */
            this.href = this.href.split('?')[0].replace('DELETE@THIS', '@');
            $(this).unbind(events, addressCleaner);
        }
        $('a[href^="mailto:"]').bind(events, addressCleaner);
    }());

    var infobox = $('#info');
    infobox.hide();
    infobox.fadeIn('slow');

    var photosetID = '72157628766778535';
    var pictureSizes = ['l', 'k']; // from smallest to largest
    var perSizeAttributes = ['url', 'width', 'height'];
    var urlAttributes = [];
    pictureSizes.forEach(function(size) {
        perSizeAttributes.forEach(function(perSizeAttribute) {
            urlAttributes.push(perSizeAttribute + '_' + size);
        });
    });
    var urlExtras = urlAttributes.join();

    $.ajax('https://api.flickr.com/services/rest/', {
        jsonp: 'jsoncallback',
        dataType: 'jsonp',
        cache: false,
        data: {
            api_key: 'baffdb3f3f3d6542c2905eb089ddf2ca',
            format: 'json',
            method: 'flickr.photosets.getPhotos',
            photoset_id: photosetID,
            user_id: '73022107@N00', // specifying the set owner like this gives better performance
            extras: urlExtras + ',path_alias'
        },
        success: function(data) {
            var photos = data.photoset.photo;
            var photo = photos[Math.floor(Math.random() * photos.length)];

            var photobox = $('#photocredit');
            if (photo.title) {
                photobox.html('<p>Photo: <a></a></p>');
            } else {
                photobox.html('<p><a>Photo</a></p>');
            }
            var a = photobox.find('a');
            a.attr('href',
                'https://www.flickr.com/photos/' +
                photo.pathalias + '/' + photo.id +
                '/in/set-' + photosetID + '/');
            if (photo.title) a.text(photo.title);

            var photoAspect = photo.width_l / photo.height_l;
            var screenAspect = window.screen.width / window.screen.height;
            var neededDimension;
            if (photoAspect > screenAspect) {
                neededDimension = 'height';
            } else {
                neededDimension = 'width';
            }

            var photoURL;
            for (var i = 0; i < pictureSizes.length; ++i) {
                var size = pictureSizes[i];
                
                var newPhotoURL = photo['url_' + size];
                if (!newPhotoURL) continue;
                
                photoURL = newPhotoURL;
                if (photo[neededDimension + '_' + size] >= window.screen[neededDimension]) {
                    // This photo can cover the whole screen.
                    break;
                }
            }

            $('<img>').attr('src', photoURL).load(function() {
                $('#background')
                    .css('background-image', "url('" + this.src + "')")
                    .fadeIn('fast', function() {
                        window.setTimeout(function() {
                            photobox.fadeIn('slow');
                        }, 500);
                    });
            });
        }
    });

    $('h1,#showinfo').click(function() {
        $('#info').slideToggle();
        $('#showinfo').fadeToggle('slow');
    });
});
</script>

<style>
html {
    background-color: #444;
    color: #fff;
    text-shadow: #111 1px 1px 2px;
}
body {
    font-family: "nimbus-sans",sans-serif;
    font-size: 100%;
    margin: 0;
}
html,body,#background {
    height: 100%;
}
.box {
    background-color: rgba(70, 70, 70, 0.68);
    padding: 1.25em;
    margin: 1.5em;
    border-radius: 1.1em;
    -moz-border-radius: 1.1em;
}
.box *:first-child {
    margin-top: -0.1em;
}
.box *:last-child {
    margin-bottom: 0;
}
h1,h2 {
    font-family: "futura-pt",sans-serif;
    font-weight: normal;
    font-style: normal;
    margin: 0.45em 0;
    text-shadow: #111 1px 1px 1px;
    margin-bottom: 0.2em;
}
h1 {
    font-size: 205%;
}
h2 {
    font-size: 153.9%;
}
a {
    text-decoration: none;
    color: #A8C1E7;
}
a:hover, a:active {
    text-decoration: underline;
}
#background {
    position: fixed;
    width: 100%;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-size: cover;
    -moz-background-size: cover;
}
.topbox {
    position: absolute;
    top: 0;
    right: 0;
}
#info {
    max-width: 19.5em;
    z-index: 1;
}
#info p {
    padding: 0 0.5em;
}
#showinfo {
    display: none;
}
h1:hover,#showinfo:hover {
    cursor: pointer;
}
#photocredit {
    position: fixed;
    left: 0;
    bottom: 0;
}
.singlelinebox {
    padding: 0.6em;
    border-radius: 0.528em;
    -moz-border-radius: 0.528em;
    display: none;
}
</style>
<style>
@media screen and (max-width: 600px) {
    .topbox {
        position: relative;
        float: right;
        max-width: none;
    }
    #photocredit {
        position: relative;
        float: left;
    }
}
</style>
</head>

<body>

<div id="background" style="display: none;"></div>

<div class="box topbox" id="info">
<h1>Jon Colverson</h1>
<p>Hello! You can find me on <a href="https://twitter.com/JJC1138">Twitter</a>, <a href="http://jjc1138.tumblr.com/">Tumblr</a>, <a href="https://www.youtube.com/JJC1138">YouTube</a>, <a href="https://www.facebook.com/JJC1138">Facebook</a>, and <a href="mailto:jonDELETE@THIScolverson.co.uk?subject=Email%20address%20needs%20editing&amp;body=Please%20remove%20the%20bits%20'DELETE'%20and%20'THIS'%20from%20the%20address%20before%20sending%20your%20message.">email</a>.</p>
<h2>Professionalistic</h2>
<p>I make games under the name <a href="http://neverdontplay.com/">Never Don't Play</a>, (formerly <a href="http://JJCgames.com/">JJCgames</a>), and I was one half of <a href="http://whatevergames.net/">Whatever Games</a>.</p>
<h2>Open sourciness</h2>
<p>I made <a href="http://staticwebsync.jjc1138.net/">staticwebsync</a>, <a href="http://nanotweeter.jjc1138.net/">nanoTweeter</a>, and <a href="http://scrobbledroid.jjc1138.net/">Scrobble Droid</a>.</p>
</div>

<div class="box topbox singlelinebox" id="showinfo">
<p>Show info</p>
</div>

<div class="box singlelinebox" id="photocredit">
</div>

</body>
</html>
